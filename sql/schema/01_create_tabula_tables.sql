DROP TABLE IF EXISTS {tabula_schema}.{tabula_table} CASCADE;
-- create the new table
CREATE TABLE IF NOT EXISTS {tabula_schema}.{tabula_table} (
    id INTEGER GENERATED BY DEFAULT AS IDENTITY NOT NULL PRIMARY KEY,
    "Code_BuildingVariant" character varying COLLATE pg_catalog."default",
    "Remark_BuildingVariant_1" text COLLATE pg_catalog."default",
    "Remark_BuildingVariant_2" text COLLATE pg_catalog."default",
    "Date_Entry" date,
    "Date_Change" date,
    "Code_StatusDataset" character varying COLLATE pg_catalog."default",
    "Code_Country" character varying COLLATE pg_catalog."default",
    "Number_BuildingVariant" integer,
    "Code_TypeVariant" character varying COLLATE pg_catalog."default",
    "Code_Building" character varying COLLATE pg_catalog."default",
    "Description_BuildingVariant" text COLLATE pg_catalog."default",
    "Description_BuildingVariant_National" text COLLATE pg_catalog."default",
    "Code_BuildingType" character varying COLLATE pg_catalog."default",
    "Code_DataType_Building" character varying COLLATE pg_catalog."default",
    "Code_BuildingSizeClass" character varying COLLATE pg_catalog."default",
    "Code_ConstructionYearClass" character varying COLLATE pg_catalog."default",
    "Year1_Building" integer,
    "Year2_Building" integer,
    "Code_UtilisationType" character varying COLLATE pg_catalog."default",
    "V_C" real,
    "A_C_National" real,
    "A_C_ExtDim" real,
    "A_C_IntDim" real,
    "A_C_Use" real,
    "A_C_Living" real,
    "A_C_Ref_Input" real,
    "n_Apartment" real,
    "n_Storey" real,
    "Code_RoofType_val_data" character varying[] COLLATE pg_catalog."default",
    "Code_RoofType" character varying COLLATE pg_catalog."default",
    "Code_AtticCond_val_data" character varying[] COLLATE pg_catalog."default",
    "Code_AtticCond" character varying COLLATE pg_catalog."default",
    "Code_CellarCond_val_data" character varying[] COLLATE pg_catalog."default",
    "Code_CellarCond" character varying COLLATE pg_catalog."default",
    "Code_AttachedNeighbours_val_data" character varying[] COLLATE pg_catalog."default",
    "Code_AttachedNeighbours" character varying COLLATE pg_catalog."default",
    "A_SolarPotential_1" real,
    "Code_Orientation_SolarPotential_1" character varying COLLATE pg_catalog."default",
    "Inclination_SolarPotential_1" real,
    "A_SolarPotential_2" real,
    "Code_Orientation_SolarPotential_2" character varying COLLATE pg_catalog."default",
    "Inclination_SolarPotential_2" real,
    "Code_ComplexFootprint_val_data" character varying[] COLLATE pg_catalog."default",
    "Code_ComplexFootprint" character varying COLLATE pg_catalog."default",
    "Code_ComplexRoof_val_data" character varying[] COLLATE pg_catalog."default",
    "Code_ComplexRoof" character varying COLLATE pg_catalog."default",
    "h_Ceiling" real,
    "A_Roof_1" real,
    "A_Roof_2" real,
    "A_Wall_1" real,
    "A_Wall_2" real,
    "A_Wall_3" real,
    "A_Floor_1" real,
    "A_Floor_2" real,
    "A_Window_1" real,
    "A_Window_2" real,
    "A_Door_1" real,
    "A_Window_Horizontal" real,
    "A_Window_East" real,
    "A_Window_South" real,
    "A_Window_West" real,
    "A_Window_North" real,
    "Code_TypeIntake_EnvelopeArea_val_data" character varying[] COLLATE pg_catalog."default",
    "Code_TypeIntake_EnvelopeArea" character varying COLLATE pg_catalog."default",
    "f_Corr_CeilingHeight" real,
    "f_PlausiCrit_EnvSum_LowerLimit" real,
    "f_PlausiCrit_EnvSum_UpperLimit" real,
    "f_PlausiCrit_FloorArea_LowerLimit" real,
    "f_PlausiCrit_FloorArea_UpperLimit" real,
    "f_PlausiCrit_WindowArea_LowerLimit" real,
    "f_PlausiCrit_WindowArea_UpperLimit" real,
    "Code_ThermalBridging_Original" character varying COLLATE pg_catalog."default",
    "Code_ThermalBridging_Refurbished" character varying COLLATE pg_catalog."default",
    "Code_Infiltration_Actual" character varying COLLATE pg_catalog."default",
    "Code_Roof_1" character varying COLLATE pg_catalog."default",
    "Code_Roof_2" character varying COLLATE pg_catalog."default",
    "Code_Wall_1" character varying COLLATE pg_catalog."default",
    "Code_Wall_2" character varying COLLATE pg_catalog."default",
    "Code_Wall_3" character varying COLLATE pg_catalog."default",
    "Code_Floor_1" character varying COLLATE pg_catalog."default",
    "Code_Floor_2" character varying COLLATE pg_catalog."default",
    "Code_Window_1" character varying COLLATE pg_catalog."default",
    "Code_Window_2" character varying COLLATE pg_catalog."default",
    "Code_Door_1" character varying COLLATE pg_catalog."default",
    "Code_ConstructionBorder_Roof_1" character varying COLLATE pg_catalog."default",
    "Code_ConstructionBorder_Roof_2" character varying COLLATE pg_catalog."default",
    "Code_ConstructionBorder_Wall_1" character varying COLLATE pg_catalog."default",
    "Code_ConstructionBorder_Wall_2" character varying COLLATE pg_catalog."default",
    "Code_ConstructionBorder_Wall_3" character varying COLLATE pg_catalog."default",
    "Code_ConstructionBorder_Floor_1" character varying COLLATE pg_catalog."default",
    "Code_ConstructionBorder_Floor_2" character varying COLLATE pg_catalog."default",
    "delta_U_ThermalBridging_Original" real,
    "delta_U_ThermalBridging_Refurbished" real,
    n_air_infiltration real,
    "U_Roof_1" real,
    "U_Roof_2" real,
    "U_Wall_1" real,
    "U_Wall_2" real,
    "U_Wall_3" real,
    "U_Floor_1" real,
    "U_Floor_2" real,
    "U_Window_1" real,
    "U_Window_2" real,
    "U_Door_1" real,
    "g_gl_n_Window_1" real,
    "g_gl_n_Window_2" real,
    "d_Insulation_Roof_1" real,
    "d_Insulation_Roof_2" real,
    "d_Insulation_Wall_1" real,
    "d_Insulation_Wall_2" real,
    "d_Insulation_Wall_3" real,
    "d_Insulation_Floor_1" real,
    "d_Insulation_Floor_2" real,
    "R_Add_UnheatedSpace_Roof_1" real,
    "R_Add_UnheatedSpace_Roof_2" real,
    "R_Add_UnheatedSpace_Wall_1" real,
    "R_Add_UnheatedSpace_Wall_2" real,
    "R_Add_UnheatedSpace_Wall_3" real,
    "R_Add_UnheatedSpace_Floor_1" real,
    "R_Add_UnheatedSpace_Floor_2" real,
    "b_Transmission_Roof_1" real,
    "b_Transmission_Roof_2" real,
    "b_Transmission_Wall_1" real,
    "b_Transmission_Wall_2" real,
    "b_Transmission_Wall_3" real,
    "b_Transmission_Floor_1" real,
    "b_Transmission_Floor_2" real,
    "Code_Measure_Roof_1" character varying COLLATE pg_catalog."default",
    "Code_Measure_Roof_2" character varying COLLATE pg_catalog."default",
    "Code_Measure_Wall_1" character varying COLLATE pg_catalog."default",
    "Code_Measure_Wall_2" character varying COLLATE pg_catalog."default",
    "Code_Measure_Wall_3" character varying COLLATE pg_catalog."default",
    "Code_Measure_Floor_1" character varying COLLATE pg_catalog."default",
    "Code_Measure_Floor_2" character varying COLLATE pg_catalog."default",
    "Code_Measure_Window_1" character varying COLLATE pg_catalog."default",
    "Code_Measure_Window_2" character varying COLLATE pg_catalog."default",
    "Code_Measure_Door_1" character varying COLLATE pg_catalog."default",
    "R_PredefinedMeasure_Roof_1" real,
    "R_PredefinedMeasure_Roof_2" real,
    "R_PredefinedMeasure_Wall_1" real,
    "R_PredefinedMeasure_Wall_2" real,
    "R_PredefinedMeasure_Wall_3" real,
    "R_PredefinedMeasure_Floor_1" real,
    "R_PredefinedMeasure_Floor_2" real,
    "R_PredefinedMeasure_Window_1" real,
    "R_PredefinedMeasure_Window_2" real,
    "R_PredefinedMeasure_Door_1" real,
    "g_gl_n_PredefinedMeasure_Window_1" real,
    "g_gl_n_PredefinedMeasure_Window_2" real,
    "d_Insulation_PredefinedMeasure_Roof_1" real,
    "d_Insulation_PredefinedMeasure_Roof_2" real,
    "d_Insulation_PredefinedMeasure_Wall_1" real,
    "d_Insulation_PredefinedMeasure_Wall_2" real,
    "d_Insulation_PredefinedMeasure_Wall_3" real,
    "d_Insulation_PredefinedMeasure_Floor_1" real,
    "d_Insulation_PredefinedMeasure_Floor_2" real,
    "d_Insulation_Input_Measure_Roof_1" real,
    "d_Insulation_Input_Measure_Roof_2" real,
    "d_Insulation_Input_Measure_Wall_1" real,
    "d_Insulation_Input_Measure_Wall_2" real,
    "d_Insulation_Input_Measure_Wall_3" real,
    "d_Insulation_Input_Measure_Floor_1" real,
    "d_Insulation_Input_Measure_Floor_2" real,
    "Code_MeasureType_Roof_1_val_data" character varying[] COLLATE pg_catalog."default",
    "Code_MeasureType_Roof_1" character varying COLLATE pg_catalog."default",
    "Code_MeasureType_Roof_2_val_data" character varying[] COLLATE pg_catalog."default",
    "Code_MeasureType_Roof_2" character varying COLLATE pg_catalog."default",
    "Code_MeasureType_Wall_1_val_data" character varying[] COLLATE pg_catalog."default",
    "Code_MeasureType_Wall_1" character varying COLLATE pg_catalog."default",
    "Code_MeasureType_Wall_2_val_data" character varying[] COLLATE pg_catalog."default",
    "Code_MeasureType_Wall_2" character varying COLLATE pg_catalog."default",
    "Code_MeasureType_Wall_3_val_data" character varying[] COLLATE pg_catalog."default",
    "Code_MeasureType_Wall_3" character varying COLLATE pg_catalog."default",
    "Code_MeasureType_Floor_1_val_data" character varying[] COLLATE pg_catalog."default",
    "Code_MeasureType_Floor_1" character varying COLLATE pg_catalog."default",
    "Code_MeasureType_Floor_2_val_data" character varying[] COLLATE pg_catalog."default",
    "Code_MeasureType_Floor_2" character varying COLLATE pg_catalog."default",
    "Code_MeasureType_Window_1_val_data" character varying[] COLLATE pg_catalog."default",
    "Code_MeasureType_Window_1" character varying COLLATE pg_catalog."default",
    "Code_MeasureType_Window_2_val_data" character varying[] COLLATE pg_catalog."default",
    "Code_MeasureType_Window_2" character varying COLLATE pg_catalog."default",
    "Code_MeasureType_Door_1_val_data" character varying[] COLLATE pg_catalog."default",
    "Code_MeasureType_Door_1" character varying COLLATE pg_catalog."default",
    "f_Measure_Roof_1" real,
    "f_Measure_Roof_2" real,
    "f_Measure_Wall_1" real,
    "f_Measure_Wall_2" real,
    "f_Measure_Wall_3" real,
    "f_Measure_Floor_1" real,
    "f_Measure_Floor_2" real,
    "f_Measure_Window_1" real,
    "f_Measure_Window_2" real,
    "f_Measure_Door_1" real,
    "Code_ClimateRegion" character varying COLLATE pg_catalog."default",
    "Name_ClimateRegion" character varying COLLATE pg_catalog."default",
    "HeatingDays" real,
    "Theta_e_Base" real,
    "Theta_e" real,
    "I_Sol_Hor" real,
    "I_Sol_East" real,
    "I_Sol_South" real,
    "I_Sol_West" real,
    "I_Sol_North" real,
    "Code_BoundaryCond" character varying COLLATE pg_catalog."default",
    theta_i real,
    "F_red_htr1" real,
    "F_red_htr4" real,
    n_air_use real,
    h_room real,
    phi_int real,
    q_w_nd real,
    "F_sh_hor" real,
    "F_sh_vert" real,
    "F_f" real,
    "F_w" real,
    c_m real,
    CONSTRAINT unique_code_buildingvariant UNIQUE ("Code_BuildingVariant")
);

DROP TABLE IF EXISTS {city2tabula_schema}.{tabula_variant_table} CASCADE;
CREATE TABLE IF NOT EXISTS {city2tabula_schema}.{tabula_variant_table} (
    id SERIAL PRIMARY KEY,
    tabula_variant_code_id INTEGER NOT NULL UNIQUE,
    tabula_variant_code TEXT NOT NULL,
    max_volume DOUBLE PRECISION,
    total_area DOUBLE PRECISION,
    construction_year_1 INTEGER, -- time range start year
    construction_year_2 INTEGER, -- time range end year
    footprint_area DOUBLE PRECISION,
    number_of_storeys INTEGER,
    footprint_complexity INTEGER CHECK (footprint_complexity IN (-1, 0, 1, 2)),
    attached_neighbour_class INTEGER CHECK (attached_neighbour_class IN (-1, 0, 1, 2)),
    roof_complexity INTEGER CHECK (roof_complexity IN (-1, 0, 1, 2)),
    area_total_roof DOUBLE PRECISION,
    area_total_wall DOUBLE PRECISION,
    area_total_floor DOUBLE PRECISION,
    building_size_class INTEGER CHECK (building_size_class IN (-1, 0, 1, 2, 3))
);